webpackJsonp([14],{EBsB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("0RrJ");var o=a("9K/l"),i={data:function(){return{tableData:[],addDialogForm:!1,formLabelWidth:"80px",form:{publish:JSON.parse(localStorage.getItem("staffAcc")),noticeCont:""},updateDialogForm:!1,updateForm:{id:"",nowPublish:JSON.parse(localStorage.getItem("staffAcc")),nowNoticeCont:""},currentPage:1,pagesize:4}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var t=this;Object(o.b)("anotice/index/index","").then(function(e){1==e.data.code?t.tableData=e.data.data:t.tableData=[]}).catch(function(t){})},addRole:function(){var t=this;if(this.form.noticeCont){var e={publish:this.form.publish,noticeCont:this.form.noticeCont};Object(o.b)("anotice/index/add",e).then(function(e){1==e.data.code?(t.$message.success(e.data.msg),t.tableData=e.data.data,t.addDialogForm=!1):t.$message.error(e.data.msg)}).catch(function(t){})}else this.$message.error("请输入公告内容")},handleEdit:function(t,e){this.updateDialogForm=!0,this.updateForm.id=e.id,this.updateForm.nowPublish=e.notice_Publisher,this.updateForm.nowNoticeCont=e.notice_cont},updateRole:function(){var t=this;if(this.updateForm.nowNoticeCont){var e={id:this.updateForm.id,notice_Publisher:this.updateForm.nowPublish,notice_cont:this.updateForm.nowNoticeCont};Object(o.b)("anotice/index/update",e).then(function(e){1==e.data.code?(t.$message.success(e.data.msg),t.tableData=e.data.data,t.updateDialogForm=!1):t.$message.error(e.data.msg)}).catch(function(t){})}else this.$message.error("请输入公告内容")},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteRole(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteRole:function(t){var e=this,a={id:t.id,notice_Publisher:t.notice_Publisher,notice_cont:t.notice_cont};Object(o.b)("anotice/index/delete",a).then(function(t){1==t.data.code?(e.$message.success(t.data.msg),e.tableData=t.data.data):e.$message.error(t.data.msg)}).catch(function(t){})},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogForm=!0}}},[t._v("添加")])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加公告",visible:t.addDialogForm},on:{"update:visible":function(e){t.addDialogForm=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"发布者","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:"disabled",maxlength:"10"},model:{value:t.form.publish,callback:function(e){t.$set(t.form,"publish",e)},expression:"form.publish"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公告描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入20个字以内的公告描述，支持中英文数字",maxlength:"20",onkeyup:"value=value.replace(/[^\\w\\u4E00-\\u9FA5]/g, '')"},model:{value:t.form.noticeCont,callback:function(e){t.$set(t.form,"noticeCont",e)},expression:"form.noticeCont"}},[t._v("公告描述")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑公告",visible:t.updateDialogForm},on:{"update:visible":function(e){t.updateDialogForm=e}}},[a("el-form",{attrs:{model:t.updateForm}},[a("el-form-item",{attrs:{label:"公告ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"ID",disabled:"disabled"},model:{value:t.updateForm.id,callback:function(e){t.$set(t.updateForm,"id",e)},expression:"updateForm.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发布者","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"",maxlength:"10",disabled:"disabled"},model:{value:t.updateForm.nowPublish,callback:function(e){t.$set(t.updateForm,"nowPublish",e)},expression:"updateForm.nowPublish"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公告描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入20个字以内的中文公告描述，支持中英文数字",maxlength:"20",onkeyup:"value=value.replace(/[^\\w\\u4E00-\\u9FA5]/g, '')"},model:{value:t.updateForm.nowNoticeCont,callback:function(e){t.$set(t.updateForm,"nowNoticeCont",e)},expression:"updateForm.nowNoticeCont"}},[t._v("公告描述")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateDialogForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateRole}},[t._v("确 定")])],1)],1),t._v(" "),void 0!=t.tableData&&null!=t.tableData&&t.tableData.length>0?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"notice_Publisher",label:"发布者",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"notice_cont",label:"公告描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,268720131)})],1):t._e(),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-sizes":[4,8,16,32],layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(t){a("Qm+N")},null,null);e.default=l.exports},"Qm+N":function(t,e){}});
//# sourceMappingURL=14.240fd5624e6ac784827f.js.map