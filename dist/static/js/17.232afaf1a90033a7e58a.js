webpackJsonp([17],{SDrG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"Order",data:function(){return{url:"http://127.0.0.1/th5/public/admin_order/Backorder/",selectInfo:"",orderData:[],nowData:[],sellerInfo:{},dialogFormVisible:!1,activeIndex:"全部订单",formLabelWidth:"120px",searchArr:[],nowPage:1,pageSize:5}},mounted:function(){this.getOrderList("全部订单",this.nowPage,"")},methods:{getOrderList:function(e,t,a){var r=this;this.nowPage=1,r.loadBack();r.pageSize;r.orderData=[],r.$post(r.url+"getOrderArr",{showType:e,searchInfo:a,page:r.nowPage,pageSize:r.pageSize}).then(function(e){1==e.code?r.orderData=e.data:r.orderData=[]}).catch(function(e){console.log(e)})},getNowOrder:function(e){var t=this;this.loadBack(),this.nowData=e,this.$post(this.url+"getNowOrder",{nowId:e.id}).then(function(e){1==e.code?(t.sellerInfo=e.data,t.dialogFormVisible=!0):t.$message({showClose:!0,message:e.msg,type:"error"})}).catch(function(e){console.log(e)})},enterOption:function(e){var t=this;this.loadBack(),this.$post(this.url+"editState",{nowId:e.id,buyId:e.buyer,price:e.price}).then(function(a){var r="";1==a.code?(e.state="退款成功",r="success"):(e.state="退款失败",r="error"),t.$message({showClose:!0,message:a.msg,type:r})}).catch(function(e){console.log(e)})},loadBack:function(){var e=this.$loading({lock:!0,text:"客官稍等，马上就好",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){e.close()},2e3)},clearSearch:function(){this.selectInfo="",this.getOrderList(this.activeIndex)},handleSelect:function(e,t){this.getOrderList(e)},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.nowPage=e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contanir"},[a("el-breadcrumb",{staticStyle:{"font-size":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("Peanut后台")]),e._v(" "),a("el-breadcrumb-item",[e._v("订单管理")])],1),e._v(" "),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"全部订单"}},[e._v("全部订单")]),e._v(" "),a("el-menu-item",{attrs:{index:"未完成"}},[e._v("未完成")]),e._v(" "),a("el-menu-item",{attrs:{index:"待审核"}},[e._v("待审核")]),e._v(" "),a("el-menu-item",{attrs:{index:"已完成"}},[e._v("已完成")]),e._v(" "),a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入订单号进行搜索",width:"75%",onKeyUp:"value=value.replace(/[\\W]/g,'')"},model:{value:e.selectInfo,callback:function(t){e.selectInfo=t},expression:"selectInfo"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getOrderList(e.activeIndex,1,e.selectInfo)}},slot:"append"})],1),e._v(" "),""!=e.selectInfo?a("el-button",{attrs:{type:"primary"},on:{click:e.clearSearch}},[e._v("清空搜索")]):e._e()],1)],1),e._v(" "),void 0==e.orderData||null==e.orderData||e.orderData.length<=0||!e.orderData?e._e():a("el-table",{staticStyle:{width:"100%","text-align":"center","border-radius":"10px"},attrs:{data:e.orderData.slice((e.nowPage-1)*e.pageSize,e.nowPage*e.pageSize),border:"","header-cell-style":{background:"skyblue",color:"white",fontSize:"18px"},"default-sort":{prop:"order_num",order:"descending"}}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"80px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderNum",width:"150px",label:"订单号",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"下单账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("用户名: "+e._s(t.row.uName))]),e._v(" "),a("p",[e._v("账号: "+e._s(t.row.buyer))]),e._v(" "),a("p",[e._v("联系方式: "+e._s(t.row.phone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{staticStyle:{width:"80px",height:"80px","border-radius":"50%"},attrs:{src:t.row.head_img}})])])]}}],null,!1,3933657332)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:t.row.carImg}}),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(t.row.carName))])])])]}}],null,!1,2744072931)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"price",label:"总价/万",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderTime",width:"180px",label:"下单时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"state",label:"状态",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["退款审核中"==t.row.state?a("el-button",{attrs:{icon:"el-icon-finished",type:"warning",circle:""},on:{click:function(a){return e.enterOption(t.row)}}}):e._e(),e._v(" "),a("el-button",{attrs:{icon:"el-icon-view",type:"primary",circle:""},on:{click:function(a){return e.getNowOrder(t.row)}}})]}}],null,!1,3157267598)})],1),e._v(" "),a("el-dialog",{attrs:{title:"当前订单展示",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.nowData}},[a("el-image",{attrs:{src:e.nowData.carImg}}),e._v(" "),a("el-form-item",{attrs:{label:"下单用户：","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.nowData.uName))])]),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.nowData.phone))])]),e._v(" "),a("el-form-item",{attrs:{label:"卖家信息：","label-width":e.formLabelWidth},model:{value:e.sellerInfo,callback:function(t){e.sellerInfo=t},expression:"sellerInfo"}},[[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("账号: "+e._s(e.sellerInfo.seller))]),e._v(" "),a("p",[e._v("联系方式: "+e._s(e.sellerInfo.sellerTel))]),e._v(" "),a("div",{staticClass:"name-wrapper",staticStyle:{width:"120px"},attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(e.sellerInfo.sName))])])])]],2),e._v(" "),a("el-form-item",{attrs:{label:"商品名称：","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.nowData.carName))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品价格：","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.nowData.price)+"万")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","current-page":e.nowPage,"page-sizes":[5,10,15,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.orderData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(e){a("UsxV")},"data-v-7b4e409e",null);t.default=o.exports},UsxV:function(e,t){}});
//# sourceMappingURL=17.232afaf1a90033a7e58a.js.map