webpackJsonp([6],{BOLD:function(e,t){},QOTI:function(e,t){},Rs61:function(e,t){},fInD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("9K/l"),s={name:"AdminInfo",data:function(){var e=/^[\u4E00-\u9FA5A-Za-z0-9_]{1,6}$/,t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,16}$/,o=/^1[3578]\d{9}$/;return{adminInfo:{},dialogVisible:!1,phoneShow:!1,passShow:!1,sexShow:!1,imgShow:!1,imageUrl:"",lastUrl:"",ruleForm:{name:"",phone:"",pass:"",sex:""},rules:{name:[{validator:function(t,o,a){""===o?a(new Error("请输入新姓名")):(null==o.match(e)&&a(new Error("昵称规则：中文、英文、数字包括下划线")),a())},trigger:"blur"}],phone:[{validator:function(e,t,a){""===t?a(new Error("请输入新手机号")):(null==t.match(o)&&a(new Error("手机号规则：13,15,17,18开头，11位数字")),a())},trigger:"blur"}],pass:[{validator:function(e,o,a){""===o?a(new Error("请输入新密码")):(null==o.match(t)&&a(new Error("密码规则：8-10位英文+数字,必须包含大小写字母和数字")),a())},trigger:"blur"}],sex:[{required:!0,message:"请选性别",trigger:"change"}]}}},created:function(){this.getInfoData()},methods:{getInfoData:function(){var e=this,t={token:JSON.parse(localStorage.getItem("token"))};Object(a.b)("/info/Center/get",t).then(function(t){if(1==t.data.code){var o=t.data.data;e.adminInfo=o[0],e.ruleForm.name=o[0].name,e.ruleForm.phone=o[0].phone,e.ruleForm.sex=o[0].sex}}).catch(function(e){console.log(e)})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleNameEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请按正确格式输入"),!1;var o={id:t.adminInfo.id,name:t.ruleForm.name};Object(a.b)("/info/Center/editName",o).then(function(e){console.log(e.data.data),1==e.data.code?(t.$message.success(e.data.msg),t.adminInfo.name=t.ruleForm.name,t.dialogVisible=!1):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},handlePhoneEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请按正确格式输入"),!1;var o={id:t.adminInfo.id,phone:t.ruleForm.phone};Object(a.b)("/info/Center/editPhone",o).then(function(e){1==e.data.code?(t.$message.success(e.data.msg),t.adminInfo.phone=t.ruleForm.phone,t.phoneShow=!1):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},handlePassEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请按正确格式输入"),!1;var o={id:t.adminInfo.id,pass:t.ruleForm.pass};Object(a.b)("/info/Center/editPass",o).then(function(e){console.log(e.data.data),1==e.data.code?(t.$message.success(e.data.msg),t.passShow=!1):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},handleSexEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请按正确格式输入"),!1;var o={id:t.adminInfo.id,sex:t.ruleForm.sex};Object(a.b)("/info/Center/editSex",o).then(function(e){console.log(e.data.data),1==e.data.code?(t.$message.success(e.data.msg),t.adminInfo.sex=t.ruleForm.sex,t.sexShow=!1):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.lastUrl=t.response},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,o="image/png"===e.type,a=e.size/1024/1024<2;return t||o?a||this.$message.error("上传头像图片大小不能超过 2MB!"):this.$message.error("上传头像图片只能是 JPG 和 PNG格式!"),(t||o)&&a},upAvatar:function(){var e=this;this.$confirm("您确定要修改头像吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.adminInfo.id,imgUrl:e.lastUrl};Object(a.b)("/info/Center/editAvatar",t).then(function(t){1==t.data.code?(e.$message.success(t.data.msg),e.imgShow=!1,e.adminInfo.head_img=e.lastUrl):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消修改"})})}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"info_box"},[o("div",{staticClass:"demo-fit"},[o("div",{staticClass:"block",on:{click:function(t){e.imgShow=!0}}},[o("el-avatar",{attrs:{shape:"square",size:100,src:e.adminInfo.head_img}})],1),e._v(" "),o("el-button",{staticStyle:{margin:"0 auto",display:"block"},attrs:{type:"warning",size:"mini"},on:{click:function(t){e.passShow=!0}}},[e._v("修改密码")])],1),e._v(" "),o("div",[o("el-divider"),e._v(" "),o("span",[e._v("角色 ："+e._s(e.adminInfo.role_name))]),e._v(" "),o("el-divider"),e._v(" "),o("span",[e._v("姓名："+e._s(e.adminInfo.name))]),e._v(" "),o("el-button",{staticClass:"info_btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改")]),e._v(" "),o("el-divider"),e._v(" "),o("span",[e._v("账号："+e._s(e.adminInfo.account))]),e._v(" "),o("el-divider"),e._v(" "),o("span",[e._v("手机号："+e._s(e.adminInfo.phone))]),e._v(" "),o("el-button",{staticClass:"info_btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.phoneShow=!0}}},[e._v("修改")]),e._v(" "),o("el-divider"),e._v(" "),o("span",[e._v("性别 ："+e._s(e.adminInfo.sex))]),e._v(" "),o("el-button",{staticClass:"info_btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.sexShow=!0}}},[e._v("修改")])],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticClass:"newName",attrs:{label:"姓名",prop:"name"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入新姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleNameEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.phoneShow,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.phoneShow=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticClass:"newName",attrs:{label:"手机号",prop:"phone"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入新手机"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.phoneShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlePhoneEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.passShow,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.passShow=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticClass:"newName",attrs:{label:"密码",prop:"pass"}},[o("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.passShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlePassEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.sexShow,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.sexShow=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticClass:"newName",attrs:{label:"性别",prop:"sex"}},[o("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[o("el-radio",{attrs:{label:"男"}}),e._v(" "),o("el-radio",{attrs:{label:"女"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.sexShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSexEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"修改头像",visible:e.imgShow,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.imgShow=t}}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://118.190.149.14/th5/public/goods/index/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"image"}},[e.imageUrl?o("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.imgShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.upAvatar}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(s,n,!1,function(e){o("QOTI"),o("Rs61"),o("BOLD")},"data-v-5bd0b132",null);t.default=r.exports}});
//# sourceMappingURL=6.d70a5c2e65b87b2283fd.js.map